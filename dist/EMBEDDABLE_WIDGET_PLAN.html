<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Embeddable Booking Widget - Technical Specification</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            background-color: #f8f9fa;
        }

        .container {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #1677ff;
            border-bottom: 3px solid #1677ff;
            padding-bottom: 0.5rem;
            margin-bottom: 2rem;
        }

        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.5rem;
            margin-top: 2rem;
        }

        h3 {
            color: #34495e;
            margin-top: 1.5rem;
        }

        h4 {
            color: #2c3e50;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        code {
            background: #f4f4f4;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            color: #333;
            border: 1px solid #e0e0e0;
        }

        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
            position: relative;
        }

        pre code {
            background: none;
            padding: 0;
            border: none;
            color: #333;
            display: block;
            white-space: pre;
        }

        .highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .highlight h4 {
            color: white;
            margin-top: 0;
        }

        .highlight ul {
            margin-bottom: 0;
        }

        .success-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }

        .info-box {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }

        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th,
        td {
            border: 1px solid #dee2e6;
            padding: 0.75rem;
            text-align: left;
            vertical-align: top;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .nav-links {
            background: #e9ecef;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 2rem;
        }

        .nav-links a {
            color: #1677ff;
            text-decoration: none;
            margin-right: 1rem;
            font-weight: 500;
        }

        .nav-links a:hover {
            text-decoration: underline;
        }

        .emoji {
            font-size: 1.2em;
        }

        ul,
        ol {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        li {
            margin: 0.5rem 0;
        }

        .architecture-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 2rem;
            margin: 1.5rem 0;
            text-align: center;
        }

        .architecture-box h3 {
            margin-top: 0;
            color: #1677ff;
        }

        .back-link {
            display: inline-block;
            background: #6c757d;
            color: white;
            padding: 0.5rem 1rem;
            text-decoration: none;
            border-radius: 4px;
            margin-bottom: 1rem;
        }

        .back-link:hover {
            background: #5a6268;
            color: white;
        }

        .file-structure {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            overflow-x: auto;
            white-space: pre;
        }

        .file-structure .comment {
            color: #6a9955;
        }

        .file-structure .folder {
            color: #569cd6;
            font-weight: bold;
        }

        .file-structure .file {
            color: #ce9178;
        }

        .metric-box {
            display: inline-block;
            background: #e3f2fd;
            border: 1px solid #90caf9;
            color: #0d47a1;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            margin: 0.5rem 0.5rem 0.5rem 0;
            font-weight: 600;
            font-size: 0.9em;
        }

        .metrics-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .flow-arrow {
            color: #1677ff;
            font-weight: bold;
            margin: 0 0.5rem;
        }

        .step-number {
            background: #1677ff;
            color: white;
            border-radius: 50%;
            width: 2rem;
            height: 2rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
            margin-right: 0.5rem;
        }

        .copy-btn {
            background: #1677ff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
        }

        .copy-btn:hover {
            background: #0958d9;
        }
    </style>
</head>

<body>
    <div class="container">
        <a href="../demo.html" class="back-link">‚Üê Back to Demo</a>

        <h1><span class="emoji">üîß</span> Embeddable Booking Widget - Technical Specification</h1>

        <div class="nav-links">
            <strong>Quick Navigation:</strong>
            <a href="#overview">Overview</a>
            <a href="#architecture">Architecture</a>
            <a href="#integration">Integration</a>
            <a href="#initialization">Initialization</a>
            <a href="#styling">Styling</a>
            <a href="#build">Build Strategy</a>
            <a href="#security">Security</a>
            <a href="#metrics">Metrics</a>
        </div>

        <section id="overview">
            <h2><span class="emoji">üìã</span> Executive Summary</h2>
            <div class="info-box">
                <p><strong>Goal:</strong> Transform the existing React booking widget into an embeddable solution that's
                    as easy to integrate as Google Analytics or Calendly.</p>
                <p><strong>Priority:</strong> Simplicity, compatibility, and security while maintaining full
                    functionality.</p>
            </div>

            <h3><span class="emoji">üéØ</span> Target Integration Method</h3>
            <div class="highlight">
                <h4>Simple Script Tag Integration</h4>
                <ul>
                    <li><strong>User-friendly:</strong> Similar to popular widgets like Google Analytics, Calendly, or
                        Typeform</li>
                    <li><strong>No technical expertise required:</strong> Simple copy/paste integration</li>
                    <li><strong>Maximum accessibility:</strong> Works on any website platform</li>
                </ul>
            </div>
        </section>

        <section id="architecture">
            <h2><span class="emoji">üèóÔ∏è</span> Architecture Overview</h2>
            <div class="architecture-box">
                <h3>Widget Loading Flow</h3>
                <p style="font-family: monospace; font-size: 0.9em; line-height: 2;">
                    <strong>Host Website</strong>
                    <span class="flow-arrow">‚Üí</span> <strong>Script Tag</strong>
                    <span class="flow-arrow">‚Üí</span> <strong>Widget Loader</strong>
                    <span class="flow-arrow">‚Üí</span> <strong>Config Parser</strong>
                    <span class="flow-arrow">‚Üí</span> <strong>CSS Isolation</strong>
                    <span class="flow-arrow">‚Üí</span> <strong>React Mount</strong>
                    <span class="flow-arrow">‚Üí</span> <strong>Booking Form</strong>
                    <span class="flow-arrow">‚Üí</span> <strong>API Backend</strong>
                </p>
            </div>
        </section>

        <section id="integration">
            <h2><span class="emoji">üöÄ</span> Integration Examples</h2>

            <h3><span class="step-number">1</span>Basic Integration (Minimal Setup)</h3>
            <pre><code>&lt;!-- Step 1: Add container div --&gt;
&lt;div id="booking-widget" 
     data-tenant-id="your-tenant-id"
     data-api-url="https://your-api.com/api/v1"&gt;&lt;/div&gt;

&lt;!-- Step 2: Add script tag --&gt;
&lt;script src="https://cdn.your-domain.com/booking-widget.js"&gt;&lt;/script&gt;</code></pre>

            <h3><span class="step-number">2</span>Advanced Configuration (Optional)</h3>
            <pre><code>&lt;div id="booking-widget" 
     data-tenant-id="your-tenant-id"
     data-api-url="https://your-api.com/api/v1"
     data-theme="light"
     data-primary-color="#1677ff"
     data-width="800px"
     data-height="auto"
     data-language="en"&gt;&lt;/div&gt;</code></pre>

            <h3><span class="step-number">3</span>Multiple Widgets on Same Page</h3>
            <pre><code>&lt;!-- Widget 1 --&gt;
&lt;div class="booking-widget" 
     data-tenant-id="tenant-1"
     data-api-url="https://api1.com/api/v1"&gt;&lt;/div&gt;

&lt;!-- Widget 2 --&gt;
&lt;div class="booking-widget" 
     data-tenant-id="tenant-2"
     data-api-url="https://api2.com/api/v1"
     data-theme="dark"&gt;&lt;/div&gt;</code></pre>
        </section>

        <section id="initialization">
            <h2><span class="emoji">‚öôÔ∏è</span> Widget Initialization System</h2>

            <h3>Auto-Discovery Process</h3>
            <ol>
                <li><strong>DOM Ready Detection:</strong> Wait for DOM to be fully loaded</li>
                <li><strong>Element Scanning:</strong> Find all elements with <code>id="booking-widget"</code> or
                    <code>class="booking-widget"</code>
                </li>
                <li><strong>Configuration Parsing:</strong> Extract data attributes from each element</li>
                <li><strong>Validation:</strong> Ensure required parameters are present</li>
                <li><strong>Initialization:</strong> Mount React app for each valid widget container</li>
            </ol>

            <h3>Configuration Parameters</h3>

            <h4>Required Parameters</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>data-tenant-id</code></td>
                        <td>Unique identifier for your booking system</td>
                        <td><code>"your-company-123"</code></td>
                    </tr>
                    <tr>
                        <td><code>data-api-url</code></td>
                        <td>Base URL for your booking API</td>
                        <td><code>"https://api.example.com/api/v1"</code></td>
                    </tr>
                </tbody>
            </table>

            <h4>Optional Parameters</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Description</th>
                        <th>Default</th>
                        <th>Options</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>data-theme</code></td>
                        <td>Widget color theme</td>
                        <td><code>"light"</code></td>
                        <td><code>"light"</code>, <code>"dark"</code></td>
                    </tr>
                    <tr>
                        <td><code>data-primary-color</code></td>
                        <td>Primary color (hex format)</td>
                        <td><code>"#1677ff"</code></td>
                        <td>Any valid hex color</td>
                    </tr>
                    <tr>
                        <td><code>data-width</code></td>
                        <td>Widget width</td>
                        <td><code>"100%"</code></td>
                        <td>CSS width values</td>
                    </tr>
                    <tr>
                        <td><code>data-height</code></td>
                        <td>Widget height</td>
                        <td><code>"auto"</code></td>
                        <td>CSS height values</td>
                    </tr>
                    <tr>
                        <td><code>data-language</code></td>
                        <td>Interface language</td>
                        <td><code>"en"</code></td>
                        <td>Language codes (en, es, fr, etc.)</td>
                    </tr>
                </tbody>
            </table>

            <h4>Advanced Callback Configuration</h4>
            <div class="warning-box">
                <strong>Note:</strong> This is for advanced users who want custom event handling.
            </div>
            <pre><code>window.BookingWidgetConfig = {
  onBookingComplete: function(bookingData) {
    console.log('Booking completed:', bookingData);
    // Custom success handling (e.g., analytics tracking)
  },
  onError: function(error) {
    console.error('Booking error:', error);
    // Custom error handling
  },
  onLoad: function(widgetId) {
    console.log('Widget loaded:', widgetId);
    // Widget loaded successfully
  }
};</code></pre>
        </section>

        <section id="styling">
            <h2><span class="emoji">üé®</span> CSS Isolation Strategy</h2>

            <h3>How We Prevent Style Conflicts</h3>
            <div class="info-box">
                <p><strong>Problem:</strong> Widget styles might conflict with your website's existing CSS.</p>
                <p><strong>Solution:</strong> We use prefixed CSS classes and isolated styling to ensure compatibility.
                </p>
            </div>

            <h4>Our Approach:</h4>
            <ul>
                <li><strong>Prefixed CSS Classes:</strong> All styles start with <code>.booking-widget-</code></li>
                <li><strong>CSS Custom Properties:</strong> For easy theming and customization</li>
                <li><strong>Scoped Ant Design:</strong> Component library styles are isolated</li>
            </ul>

            <h3>CSS Structure Example</h3>
            <pre><code>.booking-widget-container {
  /* CSS Custom Properties for theming */
  --bw-primary-color: #1677ff;
  --bw-border-radius: 6px;
  --bw-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --bw-background: #ffffff;
  --bw-text-color: #000000;
  
  /* Container styles */
  font-family: var(--bw-font-family);
  color: var(--bw-text-color);
  background: var(--bw-background);
  border-radius: var(--bw-border-radius);
  box-sizing: border-box;
}

/* All Ant Design overrides are prefixed */
.booking-widget-container .ant-btn-primary {
  background-color: var(--bw-primary-color);
  border-color: var(--bw-primary-color);
}</code></pre>
        </section>

        <section id="build">
            <h2><span class="emoji">üì¶</span> Build & Distribution Strategy</h2>

            <h3>Multiple Output Formats</h3>
            <div class="success-box">
                <strong>We provide different versions for different needs:</strong>
                <ol>
                    <li><strong>booking-widget.js</strong> - Complete UMD bundle (~500KB uncompressed)</li>
                    <li><strong>booking-widget.min.js</strong> - Minified production version (~200KB gzipped)</li>
                    <li><strong>booking-widget.modern.js</strong> - ES modules for modern browsers (~180KB)</li>
                    <li><strong>booking-widget.css</strong> - Standalone CSS file (~50KB, optional)</li>
                </ol>
            </div>

            <h3>CDN Distribution Options</h3>
            <table>
                <thead>
                    <tr>
                        <th>CDN Provider</th>
                        <th>URL Format</th>
                        <th>Benefits</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>jsDelivr</td>
                        <td><code>https://cdn.jsdelivr.net/npm/booking-widget@latest/</code></td>
                        <td>Global CDN, auto-updates</td>
                    </tr>
                    <tr>
                        <td>unpkg</td>
                        <td><code>https://unpkg.com/booking-widget@latest/</code></td>
                        <td>Fast, reliable</td>
                    </tr>
                    <tr>
                        <td>Custom CDN</td>
                        <td><code>https://cdn.your-domain.com/</code></td>
                        <td>Full control, branding</td>
                    </tr>
                </tbody>
            </table>

            <h3>Build Configuration (Vite)</h3>
            <pre><code>// vite.config.ts
export default defineConfig({
  build: {
    lib: {
      entry: 'src/widget/index.ts',
      name: 'BookingWidget',
      formats: ['umd', 'es'],
      fileName: (format) => `booking-widget.${format}.js`
    },
    rollupOptions: {
      external: [], // Bundle all dependencies for easy integration
      output: {
        globals: {}
      }
    }
  }
})</code></pre>
        </section>

        <section id="security">
            <h2><span class="emoji">üîí</span> Security & Compatibility</h2>

            <h3>Security Measures</h3>

            <h4>Content Security Policy (CSP) Compliance</h4>
            <pre><code>&lt;meta http-equiv="Content-Security-Policy" 
      content="script-src 'self' https://cdn.your-domain.com; 
               style-src 'self' 'unsafe-inline' https://cdn.your-domain.com;"&gt;</code></pre>

            <h4>Protection Against Common Attacks</h4>
            <ul>
                <li><strong>XSS Protection:</strong> All user inputs sanitized before rendering</li>
                <li><strong>HTML Encoding:</strong> Dynamic content properly encoded</li>
                <li><strong>Input Validation:</strong> Strict validation of all configuration parameters</li>
                <li><strong>HTTPS Only:</strong> All API communication uses secure connections</li>
            </ul>

            <h3>Browser Compatibility</h3>
            <div class="info-box">
                <h4>Supported Browsers</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Browser</th>
                            <th>Desktop Version</th>
                            <th>Mobile Version</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Chrome</td>
                            <td>80+</td>
                            <td>80+</td>
                        </tr>
                        <tr>
                            <td>Firefox</td>
                            <td>75+</td>
                            <td>79+</td>
                        </tr>
                        <tr>
                            <td>Safari</td>
                            <td>13+</td>
                            <td>13+</td>
                        </tr>
                        <tr>
                            <td>Edge</td>
                            <td>80+</td>
                            <td>80+</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="metrics">
            <h2><span class="emoji">üìä</span> Success Metrics & Performance Goals</h2>

            <h3>Technical Performance Targets</h3>
            <div class="metrics-grid">
                <span class="metric-box">Bundle Size: &lt; 250KB gzipped</span>
                <span class="metric-box">Load Time: &lt; 2s on 3G</span>
                <span class="metric-box">Browser Support: 95%+ compatibility</span>
                <span class="metric-box">API Response: &lt; 500ms average</span>
            </div>

            <h3>User Experience Goals</h3>
            <div class="metrics-grid">
                <span class="metric-box">Integration Time: &lt; 5 minutes</span>
                <span class="metric-box">Error Rate: &lt; 1% failures</span>
                <span class="metric-box">Performance: 60fps animations</span>
                <span class="metric-box">Accessibility: WCAG 2.1 AA</span>
            </div>
        </section>

<section id="file-structure">
    <h2><span class="emoji">üìÅ</span> Project File Structure</h2>
    <div class="file-structure">src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ App/                    <span class="comment"># Existing app component</span>
‚îÇ   ‚îú‚îÄ‚îÄ booking/               <span class="comment"> # Existing booking components</span>
‚îÇ   ‚îî‚îÄ‚îÄ widget/                <span class="comment"> # NEW: Widget-specific components</span>
‚îÇ       ‚îú‚îÄ‚îÄ WidgetContainer.tsx <span class="comment"># Main widget wrapper</span>
‚îÇ       ‚îú‚îÄ‚îÄ WidgetLoader.tsx    <span class="comment"># Loading and initialization</span>
‚îÇ       ‚îî‚îÄ‚îÄ WidgetConfig.ts     <span class="comment"># Configuration management</span>
‚îú‚îÄ‚îÄ widget/                    <span class="comment"> # NEW: Widget entry point</span>
‚îÇ   ‚îú‚îÄ‚îÄ index.ts              <span class="comment">  # Main widget initialization</span>
‚îÇ   ‚îú‚îÄ‚îÄ loader.ts             <span class="comment">  # Auto-discovery and loading</span>
‚îÇ   ‚îú‚îÄ‚îÄ config.ts             <span class="comment">  # Configuration management</span>
‚îÇ   ‚îî‚îÄ‚îÄ styles.css            <span class="comment">  # Widget-specific styles</span>
‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îú‚îÄ‚îÄ App.css               <span class="comment">  # Existing styles</span>
‚îÇ   ‚îî‚îÄ‚îÄ widget.css            <span class="comment">  # NEW: Isolated widget styles</span>
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ widget.d.ts           <span class="comment">  # NEW: Widget type definitions</span>
    </div>
</section>

        <div style="margin-top: 3rem; padding: 1.5rem; background: #f8f9fa; border-radius: 6px; text-align: center;">
            <h3><span class="emoji">üìö</span> Related Documentation</h3>
            <p>For user-friendly integration instructions, see the <a href="WIDGET_DOCUMENTATION.html">Integration
                    Guide</a>.</p>
            <p>View the <a href="../demo.html">live demo</a> to see the widget in action.</p>
        </div>
    </div>

    <script>
        // Add copy buttons to code blocks
        document.querySelectorAll('pre code').forEach((block) => {
            const button = document.createElement('button');
            button.className = 'copy-btn';
            button.textContent = 'Copy';
            button.onclick = () => {
                navigator.clipboard.writeText(block.textContent);
                button.textContent = 'Copied!';
                setTimeout(() => button.textContent = 'Copy', 2000);
            };
            block.parentNode.appendChild(button);
        });

        // Smooth scroll for navigation links
        document.querySelectorAll('.nav-links a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>

</html>